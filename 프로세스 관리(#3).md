# 1. 개념 및 유형

## 프로세스의 개념

프로세스는 CPU와 메모리를 할당받아 실행시키는 프로그램이다.

프로세스들마다 고유의 프로세스 ID(PID)를 할당받음.

가장 먼저 실행되는 프로세스는 <span style = "color:tomato">**init**</span>이다.

init의 PID는 1이다.

---

## 프로세스의 유형

- 포그라운드 프로세스
  - 사용자와 상호작용하는 프로세스
  - 명령 입력 후 수행 종료까지 기다려야 하는 프로세스
  - 화면에서 실행되는 것이 보이는 프로세스
- 백그라운드 프로세스
  - 사용자의 입력에 관계없이 실행되는 프로세스
  - 실행은 되지만 화면에 나타나지 않고 실행되는 프로세스

---

## fork()

새로운 프로세스를 만들 떄 기존 프로세스를 복제하는 방식

메모리를 할당한다

원본 프로세스를 부모 프로세스, 새로 복제된 프로세스는 자식 프로세스

---

## exec()

호출하는 프로세스가 새로운 프로세스로 변경

메모리를 할당하지 않는다

exec()에 의해 호출된 프로세스만 메모리에 남게 된다

---

## 데몬(Daemon)

리눅스 시스템이 부팅 시 자동으로 실행되는 백그라운드 프로세스

메모리에 상주

주기적이고 지속적인 서비스 요청을 처리하기 위해 실행

- standalone 데몬
  - 서비스가 메모리에 상주하는 단독 실행 방식
  - 항상 메모리에 상주
  - 실행 스크립트 위치는 <span style = "color:tomato">"/etc/inetd.d/"</span>
- inetd 데몬(슈퍼 데몬)
  - 다른 데몬들의 상위에 존재하는 standalone 데몬
  - 리눅스 커널 2.4 버전부터 <span style = "color:tomato">xinetd</span>가 inetd 역할을 수행
  - <span style = "color:tomato">운영 빈도수가 낮은 </span>프로세스들로 설장하는 것이 효율적이다
- inetd 타입 데몬
  - Telnet, FTP, rlogin과 같은 데몬들이 inetd 타입 데몬에 해당

---

## 시그널

명령어 kill -l로 시그널 리스트를 확인

- 1 - SIGHUP : 터미널과 연결이 끊어졌을 때
- 2 - SIGINT : Ctrl + c 입력 시
- 9 - SIGKILL : 프로세스 강제 종료 시
- 13 - SIGPIPE : 파이프가 끊어졌을 때
- 14 - SIGALRM : 알람 타이머 만료 시
- 15 - SIGTERM : kill 시스템 호출 시
- 20 - SIGSTP : Ctrl + z 입력 시

---

# 2. 프로세스 유틸리티

## ps(process status)

현재 실행중인 프로세스의 상태를 보여주는 명령어

### 옵션

- a : 현재 실행 중인 모든 프로세스 출력(all)
- e : 모든 프로세스 정보(every)
- u : 사용자 이름과 프로세스 시작 시간 출력(사용자 == user --> u)
- x : 접속된 터미널뿐만 아니라 사용되고 있는 모든 프로세스들을 출력
- l : 자세한 정보 출력

### 프로세스 상태

- P : 수행 가능/수행 중
- R : 현재 실행 상태
- S : 잠든 상태
- D : I/O 작업이 끝나기를 기다리면서 정지된 상태
- T : 정지된 상태(suspend), 일시 정지 상태
- <span style="color:tomato">Z</span> : 좀비 프로세스, 작업 종료 후 부모 프로세스로부터 회수되지 않아 메모리에 적재되어 있는 상태

좀비 프로세스는 kill 시그널을 받아도 종료되지 않는다

---

## pstree

실행 중인 프로세스들을 트리구조로 나타낸다

### 옵션

- -p : 프로세스 ID 표시
- -n : 프로세스 ID를 정렬해서 표시
- -a : 명령행 인자를 포함한 정보를 트리구조에 표시(argument --> a)
- -h : 현재 프로세스와 해당 프로세스의 부모 프로세스를 음영으로 강조해서 표시(highright --> h)

---

## jobs

작업이 중지된 상태, 백그라운드로 진행 중인 상태, 변경되었지만 보고되지 않은 상태 등을 표시한다

### 옵션

- -l : 프로세스 그룹 ID를 state 필드 앞에 표시
- -n : 프로레스 그룹 중 대표 프로세스 ID 표시
- -p : 프로세스 ID를 한 행씩 표시

출력된 목록에서 +는 현재 작업 실행, -는 앞으로 실행될 작업을 나타낸다.

---

## bg

현재 실행중인 프로세스를 백그라운드 작업으로 전환한다

포그라운드 작업을 <span style = "color:red">일시 중지시킨 후(Ctrl + z), bg </span>명령을 실행한다

명령어를 실행할 때 명령어 뒤에 &를 붙여주면 백그라운드로 실행

---

## fg

현재 백그라운드로 실행 중인 명령어를 포그라운드로 전환

<span style = "color:red">fg %작업번호 또는 fg 작업번호</span>

포그라운드 작업을 종료하려면 Ctrl + c

---

## kill

프로세스를 종료

### 옵션

- -l : 시그널 종류 나열
- -s 시그널번호, -s 시그널명 : 전달할 시그널의 종류를 지정
- -1 : -HUP, 프로세스를 재시작
- -9 : 프로세스를 강제 종료

---

## killall

같은 데몬의 여러 프로세스를 한 번에 종료

### 옵션

- -g : 그룹을 지정하여 종료
- -i : 프로세스 종료 전 확인 메시지 표시
- -l : 시그널 목록 표시
- -v : 상세 정보 표시

---

## nice

프로세스 사이의 우선순위를 확인하고 우선순위 변경

nice [옵션] 프로세스명

-n 조정수치, -조정수치, --adjustment 조정수치 : 명령의 우선권에 조정수치를 더함(양수값 : -, 음수값 : --)

NI값의 범위는 <span style = "color:red">-20(가정 높은 우선권) ~ 19(가장 낮은 우선권)</span>

옵션 -n을 사용하지 않으면 디폴트 값은 10

---

## renice

이미 실행 중인 프로세스의 우선순위를 변경

renice [옵션]NI값 PID

### 옵션

- -p : 프로세스 ID 지정
- -u : 사용자명 지정
- -g : 프로세스의 GID 지정

<span style = "color:red">renice는 NI값을 증감시키는게 아니라 지정하는 것</span>

Ex) renice -20 3241 --> 3241의 NI값을 -20으로 지정

---

## top

리눅스 시스템의 운영 상태를 실시간으로 모니터링하거나 프로세스 상태를 확인 가능

### 옵션

- -d 시간 : 실시간 화면 출력 시간 지정
- -p PID : 모니터할 프로세스 ID 지정

---

## nohup

프로세스가 중단되지 않고 백그라운드로 작업 수행

사용자가 로그아웃하거나 작업 중인 터미널 창이 닫혀도 실행 중인 프로세스를 백그라운드로 계속 작업

명령어 뒤에 &를 명시

실행 중인 프로세스의 표준 결과는 <span style = "color:red">nohup.out</span>이라는 파일을 생성하여 기록

작업 디렉터리에 쓰기가 불가능한 경우 <span style = "color:red">$HOME/nohup.out</span>파일을 자동으로 생성하여 기록

---

## tail

파일의 마지막 행을 기준으로 지정한 행까지 파일 내용의 일부를 출력

### 옵션

- -f : 파일의 10줄을 출력하고 파일의 내용을 실시간으로 출력
- -n N : N 개수만큼 출력

---

## 스케줄링과 cron

주기적으로 반복되는 일을 자동적으로 실행될 수 있도록 설정

스케줄링 데몬은 <span style = "color:red">crond</span> 이며, 관련 파일은 <span style = "color:red">/etc/crontab</span>이다

---

## crontab

사용자가 주기적인 작업을 등록할 수 있게 한다

### 옵션

- -l : crontab에 설정된 내용 출력
- -e : crontab을 작성하거나 수정
- -r : crontab 내용 삭제
- -u : 특정 사용자의 일정 수정
